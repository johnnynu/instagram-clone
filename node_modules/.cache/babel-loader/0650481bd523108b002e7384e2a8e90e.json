{"ast":null,"code":"import React from\"react\";import{Switch,Route,useHistory,useLocation}from\"react-router-dom\";import FeedPage from\"./pages/feed\";import ExplorePage from\"./pages/explore\";import ProfilePage from\"./pages/profile\";import PostPage from\"./pages/post\";import EditProfilePage from\"./pages/edit-profile\";import LoginPage from\"./pages/login\";import SignUpPage from\"./pages/signup\";import NotFoundPage from\"./pages/not-found\";import PostModal from\"./components/post/PostModal\";function App(){var _location$state;var history=useHistory();var location=useLocation();var prevLocation=React.useRef(location);var modal=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.modal;React.useEffect(function(){if(history.action!==\"POP\"&&!modal){prevLocation.current=location;}},[location,modal,history.action]);var isModalOpen=modal&&prevLocation.current!==location;return React.createElement(React.Fragment,null,React.createElement(Switch,{location:isModalOpen?prevLocation.current:location},React.createElement(Route,{exact:true,path:\"/\",component:FeedPage}),React.createElement(Route,{path:\"/explore\",component:ExplorePage}),React.createElement(Route,{exact:true,path:\"/:username\",component:ProfilePage}),React.createElement(Route,{exact:true,path:\"/p/:postId\",component:PostPage}),React.createElement(Route,{path:\"/accounts/edit\",component:EditProfilePage}),React.createElement(Route,{path:\"/accounts/login\",component:LoginPage}),React.createElement(Route,{path:\"/accounts/emailsignup\",component:SignUpPage}),React.createElement(Route,{path:\"*\",component:NotFoundPage})),isModalOpen&&React.createElement(Route,{exact:true,path:\"/p/:postId\",component:PostModal}));}export default App;","map":{"version":3,"sources":["/Users/johnnynguyen/instagram-clone/src/App.js"],"names":["React","Switch","Route","useHistory","useLocation","FeedPage","ExplorePage","ProfilePage","PostPage","EditProfilePage","LoginPage","SignUpPage","NotFoundPage","PostModal","App","history","location","prevLocation","useRef","modal","state","useEffect","action","current","isModalOpen"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,UAAxB,CAAoCC,WAApC,KAAuD,kBAAvD,CACA,MAAOC,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAOC,CAAAA,eAAP,KAA4B,sBAA5B,CACA,MAAOC,CAAAA,SAAP,KAAsB,eAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,gBAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,mBAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CAEA,QAASC,CAAAA,GAAT,EAAe,qBACb,GAAMC,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CACA,GAAMa,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,CAAAA,YAAY,CAAGjB,KAAK,CAACkB,MAAN,CAAaF,QAAb,CAArB,CACA,GAAMG,CAAAA,KAAK,kBAAGH,QAAQ,CAACI,KAAZ,0CAAG,gBAAgBD,KAA9B,CAEAnB,KAAK,CAACqB,SAAN,CAAgB,UAAM,CACpB,GAAIN,OAAO,CAACO,MAAR,GAAmB,KAAnB,EAA4B,CAACH,KAAjC,CAAwC,CACtCF,YAAY,CAACM,OAAb,CAAuBP,QAAvB,CACD,CACF,CAJD,CAIG,CAACA,QAAD,CAAWG,KAAX,CAAkBJ,OAAO,CAACO,MAA1B,CAJH,EAMA,GAAME,CAAAA,WAAW,CAAGL,KAAK,EAAIF,YAAY,CAACM,OAAb,GAAyBP,QAAtD,CAEA,MACE,yCACE,oBAAC,MAAD,EAAQ,QAAQ,CAAEQ,WAAW,CAAGP,YAAY,CAACM,OAAhB,CAA0BP,QAAvD,EACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEX,QAAjC,EADF,CAEE,oBAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAEC,WAAlC,EAFF,CAGE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,YAAlB,CAA+B,SAAS,CAAEC,WAA1C,EAHF,CAIE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,YAAlB,CAA+B,SAAS,CAAEC,QAA1C,EAJF,CAKE,oBAAC,KAAD,EAAO,IAAI,CAAC,gBAAZ,CAA6B,SAAS,CAAEC,eAAxC,EALF,CAME,oBAAC,KAAD,EAAO,IAAI,CAAC,iBAAZ,CAA8B,SAAS,CAAEC,SAAzC,EANF,CAOE,oBAAC,KAAD,EAAO,IAAI,CAAC,uBAAZ,CAAoC,SAAS,CAAEC,UAA/C,EAPF,CAQE,oBAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,SAAS,CAAEC,YAA3B,EARF,CADF,CAWGY,WAAW,EAAI,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,YAAlB,CAA+B,SAAS,CAAEX,SAA1C,EAXlB,CADF,CAeD,CAED,cAAeC,CAAAA,GAAf","sourcesContent":["import React from \"react\";\nimport { Switch, Route, useHistory, useLocation } from \"react-router-dom\";\nimport FeedPage from \"./pages/feed\";\nimport ExplorePage from \"./pages/explore\";\nimport ProfilePage from \"./pages/profile\";\nimport PostPage from \"./pages/post\";\nimport EditProfilePage from \"./pages/edit-profile\";\nimport LoginPage from \"./pages/login\";\nimport SignUpPage from \"./pages/signup\";\nimport NotFoundPage from \"./pages/not-found\";\nimport PostModal from \"./components/post/PostModal\";\n\nfunction App() {\n  const history = useHistory();\n  const location = useLocation();\n  const prevLocation = React.useRef(location);\n  const modal = location.state?.modal;\n\n  React.useEffect(() => {\n    if (history.action !== \"POP\" && !modal) {\n      prevLocation.current = location;\n    }\n  }, [location, modal, history.action]);\n\n  const isModalOpen = modal && prevLocation.current !== location;\n\n  return (\n    <>\n      <Switch location={isModalOpen ? prevLocation.current : location}>\n        <Route exact path=\"/\" component={FeedPage} />\n        <Route path=\"/explore\" component={ExplorePage} />\n        <Route exact path=\"/:username\" component={ProfilePage} />\n        <Route exact path=\"/p/:postId\" component={PostPage} />\n        <Route path=\"/accounts/edit\" component={EditProfilePage} />\n        <Route path=\"/accounts/login\" component={LoginPage} />\n        <Route path=\"/accounts/emailsignup\" component={SignUpPage} />\n        <Route path=\"*\" component={NotFoundPage} />\n      </Switch>\n      {isModalOpen && <Route exact path=\"/p/:postId\" component={PostModal} />}\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}