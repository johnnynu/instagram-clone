{"ast":null,"code":"var _jsxFileName = \"/Users/johnnynguyen/instagram-clone/src/components/shared/ProfilePicture.js\";\nimport React from \"react\";\nimport { useProfilePictureStyles } from \"../../styles\";\nimport { Person } from \"@material-ui/icons\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport handleImageUpload from \"../../utils/handleImageUpload\";\nimport { EDIT_USER_AVATAR } from \"../../graphql/mutations\";\nimport { UserContext } from \"../../App\";\n\nfunction ProfilePicture({\n  size,\n  image,\n  isOwner\n}) {\n  const {\n    currentUserId\n  } = React.useContext(UserContext);\n  const classes = useProfilePictureStyles({\n    size,\n    isOwner\n  });\n  const inputRef = React.useRef();\n  const [img, setImg] = React.useState(image);\n  const [editUserAvatar] = useMutation(EDIT_USER_AVATAR);\n\n  async function handleUpdateProfilePic(event) {\n    const url = await handleImageUpload(event.target.files[0], \"avatar\");\n    const variables = {\n      id: currentUserId,\n      profileImage: url\n    };\n    console.log(url);\n    await editUserAvatar({\n      variables\n    });\n    setImg(url);\n  }\n\n  function openFileInput() {\n    inputRef.current.click();\n  }\n\n  return React.createElement(\"section\", {\n    className: classes.section,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    style: {\n      display: \"none\"\n    },\n    ref: inputRef,\n    type: \"file\",\n    onChange: handleUpdateProfilePic,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }), image ? React.createElement(\"div\", {\n    className: classes.wrapper,\n    onClick: isOwner ? openFileInput : () => null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: img,\n    alt: \"User Profile\",\n    className: classes.image,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  })) : React.createElement(\"div\", {\n    className: classes.wrapper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(Person, {\n    className: classes.person,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  })));\n}\n\nexport default ProfilePicture;","map":{"version":3,"sources":["/Users/johnnynguyen/instagram-clone/src/components/shared/ProfilePicture.js"],"names":["React","useProfilePictureStyles","Person","useMutation","handleImageUpload","EDIT_USER_AVATAR","UserContext","ProfilePicture","size","image","isOwner","currentUserId","useContext","classes","inputRef","useRef","img","setImg","useState","editUserAvatar","handleUpdateProfilePic","event","url","target","files","variables","id","profileImage","console","log","openFileInput","current","click","section","display","wrapper","person"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,uBAAT,QAAwC,cAAxC;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;AACA,SAASC,gBAAT,QAAiC,yBAAjC;AACA,SAASC,WAAT,QAA4B,WAA5B;;AAEA,SAASC,cAAT,CAAwB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,KAAR;AAAeC,EAAAA;AAAf,CAAxB,EAAkD;AAChD,QAAM;AAAEC,IAAAA;AAAF,MAAoBX,KAAK,CAACY,UAAN,CAAiBN,WAAjB,CAA1B;AACA,QAAMO,OAAO,GAAGZ,uBAAuB,CAAC;AAAEO,IAAAA,IAAF;AAAQE,IAAAA;AAAR,GAAD,CAAvC;AACA,QAAMI,QAAQ,GAAGd,KAAK,CAACe,MAAN,EAAjB;AACA,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBjB,KAAK,CAACkB,QAAN,CAAeT,KAAf,CAAtB;AACA,QAAM,CAACU,cAAD,IAAmBhB,WAAW,CAACE,gBAAD,CAApC;;AAEA,iBAAee,sBAAf,CAAsCC,KAAtC,EAA6C;AAC3C,UAAMC,GAAG,GAAG,MAAMlB,iBAAiB,CAACiB,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,EAAwB,QAAxB,CAAnC;AACA,UAAMC,SAAS,GAAG;AAAEC,MAAAA,EAAE,EAAEf,aAAN;AAAqBgB,MAAAA,YAAY,EAAEL;AAAnC,KAAlB;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYP,GAAZ;AACA,UAAMH,cAAc,CAAC;AAAEM,MAAAA;AAAF,KAAD,CAApB;AACAR,IAAAA,MAAM,CAACK,GAAD,CAAN;AACD;;AAED,WAASQ,aAAT,GAAyB;AACvBhB,IAAAA,QAAQ,CAACiB,OAAT,CAAiBC,KAAjB;AACD;;AAED,SACE;AAAS,IAAA,SAAS,EAAEnB,OAAO,CAACoB,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,KAAK,EAAE;AAAEC,MAAAA,OAAO,EAAE;AAAX,KADT;AAEE,IAAA,GAAG,EAAEpB,QAFP;AAGE,IAAA,IAAI,EAAC,MAHP;AAIE,IAAA,QAAQ,EAAEM,sBAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOGX,KAAK,GACJ;AACE,IAAA,SAAS,EAAEI,OAAO,CAACsB,OADrB;AAEE,IAAA,OAAO,EAAEzB,OAAO,GAAGoB,aAAH,GAAmB,MAAM,IAF3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AAAK,IAAA,GAAG,EAAEd,GAAV;AAAe,IAAA,GAAG,EAAC,cAAnB;AAAkC,IAAA,SAAS,EAAEH,OAAO,CAACJ,KAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CADI,GAQJ;AAAK,IAAA,SAAS,EAAEI,OAAO,CAACsB,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAEtB,OAAO,CAACuB,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAfJ,CADF;AAsBD;;AAED,eAAe7B,cAAf","sourcesContent":["import React from \"react\";\nimport { useProfilePictureStyles } from \"../../styles\";\nimport { Person } from \"@material-ui/icons\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport handleImageUpload from \"../../utils/handleImageUpload\";\nimport { EDIT_USER_AVATAR } from \"../../graphql/mutations\";\nimport { UserContext } from \"../../App\";\n\nfunction ProfilePicture({ size, image, isOwner }) {\n  const { currentUserId } = React.useContext(UserContext);\n  const classes = useProfilePictureStyles({ size, isOwner });\n  const inputRef = React.useRef();\n  const [img, setImg] = React.useState(image);\n  const [editUserAvatar] = useMutation(EDIT_USER_AVATAR);\n\n  async function handleUpdateProfilePic(event) {\n    const url = await handleImageUpload(event.target.files[0], \"avatar\");\n    const variables = { id: currentUserId, profileImage: url };\n    console.log(url);\n    await editUserAvatar({ variables });\n    setImg(url);\n  }\n\n  function openFileInput() {\n    inputRef.current.click();\n  }\n\n  return (\n    <section className={classes.section}>\n      <input\n        style={{ display: \"none\" }}\n        ref={inputRef}\n        type=\"file\"\n        onChange={handleUpdateProfilePic}\n      />\n      {image ? (\n        <div\n          className={classes.wrapper}\n          onClick={isOwner ? openFileInput : () => null}\n        >\n          <img src={img} alt=\"User Profile\" className={classes.image} />\n        </div>\n      ) : (\n        <div className={classes.wrapper}>\n          <Person className={classes.person} />\n        </div>\n      )}\n    </section>\n  );\n}\n\nexport default ProfilePicture;\n"]},"metadata":{},"sourceType":"module"}