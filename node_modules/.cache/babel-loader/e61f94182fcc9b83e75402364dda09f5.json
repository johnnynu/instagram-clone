{"ast":null,"code":"var _jsxFileName = \"/Users/johnnynguyen/instagram-clone/src/components/shared/OptionsDialog.js\";\nimport React from \"react\";\nimport { useOptionsDialogStyles } from \"../../styles\";\nimport { Dialog, Zoom, Button, Divider } from \"@material-ui/core\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { defaultPost } from \"../../data\";\nimport { UserContext } from \"../../App\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { UNFOLLOW_USER, DELETE_POST } from \"../../graphql/mutations\";\n\nfunction OptionsDialog({\n  onClose,\n  authorId,\n  postId\n}) {\n  const classes = useOptionsDialogStyles();\n  const {\n    currentUserId,\n    followingIds\n  } = React.useContext(UserContext);\n  const isOwner = authorId === currentUserId;\n  const buttonText = isOwner ? \"Delete\" : \"Unfollow\";\n  const onClick = isOwner ? handleDeletePost : handleUnfollowUser;\n  const isFollowing = followingIds.some(id => id === authorId);\n  const isUnrelatedUser = !isOwner && !isFollowing;\n  const [unfollowUser] = useMutation(UNFOLLOW_USER);\n  const [deletePost] = useMutation(DELETE_POST);\n  const history = useHistory();\n\n  async function handleDeletePost() {\n    const variables = {\n      postId,\n      userId: currentUserId\n    };\n    await deletePost({\n      variables\n    });\n    onClose();\n    history.push(\"/\");\n    window.location.reload();\n  }\n\n  function handleUnfollowUser() {\n    const variables = {\n      userIdToFollow: authorId,\n      currentUserId\n    };\n    unfollowUser({\n      variables\n    });\n    onClose();\n  }\n\n  return React.createElement(Dialog, {\n    open: true,\n    classes: {\n      scrollPaper: classes.dialogScrollPaper\n    },\n    onClose: onClose,\n    TransitionComponent: Zoom,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, !isUnrelatedUser && React.createElement(Button, {\n    onClick: onClick,\n    className: classes.redButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, buttonText), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(Button, {\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/p/${defaultPost.id}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Go to post\")), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(Button, {\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Share\"), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(Button, {\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Copy Link\"), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), React.createElement(Button, {\n    onClick: onClose,\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Cancel\"));\n}\n\nexport default OptionsDialog;","map":{"version":3,"sources":["/Users/johnnynguyen/instagram-clone/src/components/shared/OptionsDialog.js"],"names":["React","useOptionsDialogStyles","Dialog","Zoom","Button","Divider","Link","useHistory","defaultPost","UserContext","useMutation","UNFOLLOW_USER","DELETE_POST","OptionsDialog","onClose","authorId","postId","classes","currentUserId","followingIds","useContext","isOwner","buttonText","onClick","handleDeletePost","handleUnfollowUser","isFollowing","some","id","isUnrelatedUser","unfollowUser","deletePost","history","variables","userId","push","window","location","reload","userIdToFollow","scrollPaper","dialogScrollPaper","redButton","button"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useOptionsDialogStyles } from \"../../styles\";\nimport { Dialog, Zoom, Button, Divider } from \"@material-ui/core\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { defaultPost } from \"../../data\";\nimport { UserContext } from \"../../App\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { UNFOLLOW_USER, DELETE_POST } from \"../../graphql/mutations\";\n\nfunction OptionsDialog({ onClose, authorId, postId }) {\n  const classes = useOptionsDialogStyles();\n  const { currentUserId, followingIds } = React.useContext(UserContext);\n  const isOwner = authorId === currentUserId;\n  const buttonText = isOwner ? \"Delete\" : \"Unfollow\";\n  const onClick = isOwner ? handleDeletePost : handleUnfollowUser;\n  const isFollowing = followingIds.some(id => id === authorId);\n  const isUnrelatedUser = !isOwner && !isFollowing;\n  const [unfollowUser] = useMutation(UNFOLLOW_USER);\n  const [deletePost] = useMutation(DELETE_POST);\n  const history = useHistory();\n\n  async function handleDeletePost() {\n    const variables = {\n      postId,\n      userId: currentUserId\n    };\n    await deletePost({ variables });\n    onClose();\n    history.push(\"/\");\n    window.location.reload();\n  }\n\n  function handleUnfollowUser() {\n    const variables = {\n      userIdToFollow: authorId,\n      currentUserId\n    };\n    unfollowUser({ variables });\n    onClose();\n  }\n\n  return (\n    <Dialog\n      open\n      classes={{\n        scrollPaper: classes.dialogScrollPaper\n      }}\n      onClose={onClose}\n      TransitionComponent={Zoom}\n    >\n      {!isUnrelatedUser && (\n        <Button onClick={onClick} className={classes.redButton}>\n          {buttonText}\n        </Button>\n      )}\n      <Divider />\n      <Button className={classes.button}>\n        <Link to={`/p/${defaultPost.id}`}>Go to post</Link>\n      </Button>\n      <Divider />\n      <Button className={classes.button}>Share</Button>\n      <Divider />\n      <Button className={classes.button}>Copy Link</Button>\n      <Divider />\n      <Button onClick={onClose} className={classes.button}>\n        Cancel\n      </Button>\n    </Dialog>\n  );\n}\n\nexport default OptionsDialog;\n"]},"metadata":{},"sourceType":"module"}